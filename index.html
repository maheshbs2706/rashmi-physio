<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rashmi Physio</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
 <header class="topbar">
    <h1>Rashmi Physio</h1>
    <div class="actions">
      <input type="date" id="globalDate" />
      <input id="search" type="search" placeholder="Search name or phone" />
       <div class="dropdown">
        <button id="toggleActionBtn" class="dropdown-btn">
          Actions <span id="dropdownIcon">‚ñº</span>
        </button>

        <div id="actionsSection" class="dropdown-content hidden">
          <button id="btnAdd">+ Add Patient</button>
          <button id="btnReport">üìä Reports</button>
          <button id="btnExport">‚¨áÔ∏è Backup</button>
          <input id="importFile" type="file" accept="application/json" class="hidden"/>
          <button id="btnImport">‚¨ÜÔ∏è Restore</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="dashboardView">
      <div id="patientList" class="patient-list"></div>
      <p id="emptyState" class="muted hidden">No patients yet. Click ‚Äú+ Add Patient‚Äù.</p>
    </section>


<section id="reportsView" class="hidden">
  <div class="panel">
    <h2>Overall Report</h2>
    <div class="stat-container">
      <div class="stat">
        <div class="stat-label">Patients</div>
        <div class="stat-value" id="rPatients">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Total Visits</div>
        <div class="stat-value" id="rVisits">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Total Charges</div>
        <div class="stat-value" id="rCharges">‚Çπ0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Total Payments</div>
        <div class="stat-value" id="rPayments">‚Çπ0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Total Balance</div>
        <div class="stat-value" id="rBalance">‚Çπ0</div>
      </div>
    </div>

    <div class="date-controls-container">
      <div class="flex-row filter-controls">
        <label class="date-input-label">
          From
          <input type="date" id="fromDate" class="date-input-field" />
        </label>
        <label class="date-input-label">
          To
          <input type="date" id="toDate" class="date-input-field" />
        </label>
        <button id="btnApplyFilter" class="control-button">
          Apply
        </button>
        <button id="btnClearFilter" class="control-button ghost">
          Clear
        </button>
      </div>

      <div class="flex-row action-controls">
        <button id="btnExportCSV" class="control-button">
          Export
        </button>
        <button id="btnPrint" class="control-button ghost">
          Print
        </button>
      </div>
    </div>
    <div class="table-wrap">
      <table id="reportTable">
        <thead>
          <tr>
            <th>Patient</th>
            <th>Phone</th>
            <th>Visits</th>
            <th>Total Charges</th>
            <th>Total Payments</th>
            <th>Balance</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr>
            <th colspan="2">TOTAL</th>
            <th id="tVisits">0</th>
            <th id="tCharges">‚Çπ0</th>
            <th id="tPays">‚Çπ0</th>
            <th id="tBal">‚Çπ0</th>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</section>


  </main>

  <div id="patientModal" class="modal hidden">
    <div class="modal-content large">
      <div class="modal-header">
        <h2 id="modalTitle">Add Patient</h2>
        <button class="ghost" onclick="closePatientModal()">‚úï</button>
      </div>
      <div class="modal-body grid-2">
        <form id="patientForm" class="panel">
          <input type="hidden" id="patientId"/>
          <div class="avatar-wrap">
            <img id="photoPreview" class="avatar" src=""/>
            <input type="file" id="photo" accept="image/*"/>
          </div>
          <label>Full Name<input type="text" id="name" required/></label>
          <div class="row gap">
            <label>Age<input type="number" id="age" min="0" required/></label>
            <label>Gender
              <select id="gender">
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
              </select>
            </label>
          </div>
          <label>Phone<input type="text" id="phone"/></label>
          <label>Address<textarea id="address"></textarea></label>
          <label>Charge per Visit (‚Çπ)<input type="number" id="charge" min="0" step="0.01" required/></label>
          <label>Details<textarea id="details"></textarea></label>
          <label>Notes<textarea id="notes"></textarea></label>
          <div class="row space">
            <button type="submit">Save</button>
            <button class="danger" type="button" id="btnDeletePatient">Delete</button>
          </div>
        </form>

 <div class="panel">
  <h3>Profile</h3>
  <div id="profileHeader" class="muted">Select or save a patient‚Ä¶</div>

  <h4>Visits</h4>
  <form id="visitForm" class="form-row">
    <label>Date
      <input type="date" id="visitDate"/>
    </label>
    <label>Visit Count
      <input type="number" id="visitCount" min="1" value="1"/>
    </label>
    <label>Charge (‚Çπ)
      <input type="number" id="visitCharge" min="0" step="0.01"/>
    </label>
    <button type="submit">Add Visit</button>
  </form>

  <div class="table-wrap small">
    <table id="visitTable">
      <thead><tr><th>Date</th><th>Count</th><th>Charge (‚Çπ)</th><th></th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <h4>Payments</h4>
  <form id="paymentForm" class="form-row">
    <label>Date
      <input type="date" id="payDate"/>
    </label>
    <label>Amount (‚Çπ)
      <input type="number" id="payAmount" min="0" step="0.01"/>
    </label>
    <label>Mode
      <select id="payMode">
        <option>Cash</option>
        <option>UPI</option>
        <option>Card</option>
        <option>Other</option>
      </select>
    </label>
    <button type="submit">Add Payment</button>
  </form>

  <div class="table-wrap small">
    <table id="paymentTable">
      <thead><tr><th>Date</th><th>Amount (‚Çπ)</th><th>Mode</th><th></th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="balance row space">
    <div><strong>Total Charges:</strong> <span id="sumCharges">‚Çπ0</span></div>
    <div><strong>Total Payments:</strong> <span id="sumPayments">‚Çπ0</span></div>
    <div><strong>Balance:</strong> <span id="balance">‚Çπ0</span></div>
  </div>
</div>

      </div>
    </div>
  </div>
  
<div id="paymentModal" class="modal hidden">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Quick Payment</h2>
      <button class="ghost" onclick="closePaymentModal()">‚úï</button>
    </div>
    <div class="modal-body">
      <form id="quickPaymentForm">
        <label>Amount (‚Çπ)<input type="number" id="quickPayAmount" required /></label>
        <label>Date<input type="date" id="quickPayDate" value="" required /></label>
        <button type="submit">Add Payment</button>
      </form>
    </div>
  </div>
</div>

  <footer class="footer muted">
    Data is saved locally in your browser (LocalStorage). Make a backup regularly.
  </footer>

  <script src="app.js"></script>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./sw.js");
}
</script>
</body>
</html>